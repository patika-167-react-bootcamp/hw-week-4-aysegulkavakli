{"ast":null,"code":"var _jsxFileName = \"/home/dd/Projects/hw-week-4-aysegulkavakli/src/main/Login.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Button, Stack, TextField } from \"@mui/material\";\nimport axios from \"axios\";\nimport { AxiosInstance } from \"./AxiosClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login(_ref) {\n  _s();\n\n  let {\n    setLoggedIn\n  } = _ref;\n  const [data, setData] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [token, setToken] = useState();\n  const config = {\n    headers: {\n      Authorization: ~`Bearer ${token}`\n    }\n  };\n\n  const handleChange = e => {\n    const newData = { ...data\n    };\n    newData[e.currentTarget.name] = e.currentTarget.value;\n    setData(newData);\n  };\n\n  function login() {\n    axios.post('http://localhost:80/auth/login', data, config).then(function (response) {\n      setToken(response.data.token);\n      AxiosInstance.defaults.headers.common['authorization'] = `Bearer ${response.data.token}`;\n      setLoggedIn(true);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Stack, {\n    direction: \"column\",\n    width: \"50%\",\n    spacing: 2,\n    color: \"primary\",\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      label: \"Username\",\n      name: \"username\",\n      value: data.username,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      type: \"password\",\n      label: \"Password\",\n      name: \"password\",\n      value: data.password,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      type: \"submit\",\n      onClick: () => login(),\n      children: \"Sign in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"SmIIxtKeIS4jr7u4PPiQHaz38rg=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/dd/Projects/hw-week-4-aysegulkavakli/src/main/Login.tsx"],"names":["React","useState","Button","Stack","TextField","axios","AxiosInstance","Login","setLoggedIn","data","setData","username","password","token","setToken","config","headers","Authorization","handleChange","e","newData","currentTarget","name","value","login","post","then","response","defaults","common","catch","error","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAAQC,MAAR,EAAgBC,KAAhB,EAAuBC,SAAvB,QAAuC,eAAvC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,aAAR,QAA4B,eAA5B;;AAUA,eAAe,SAASC,KAAT,OAAmC;AAAA;;AAAA,MAApB;AAACC,IAAAA;AAAD,GAAoB;AAC9C,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAY;AAACU,IAAAA,QAAQ,EAAC,EAAV;AAAcC,IAAAA,QAAQ,EAAC;AAAvB,GAAZ,CAAhC;AACA,QAAM,CAACC,KAAD,EAAOC,QAAP,IAAoBb,QAAQ,EAAlC;AAEA,QAAMc,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAC;AAACC,MAAAA,aAAa,EAAC,CAAE,UAASJ,KAAM;AAAhC;AADG,GAAf;;AAGA,QAAMK,YAAY,GAAKC,CAAD,IAA2C;AAC7D,UAAMC,OAAO,GAAG,EAAC,GAAGX;AAAJ,KAAhB;AACAW,IAAAA,OAAO,CAACD,CAAC,CAACE,aAAF,CAAgBC,IAAjB,CAAP,GAAmDH,CAAC,CAACE,aAAF,CAAgBE,KAAnE;AACAb,IAAAA,OAAO,CAACU,OAAD,CAAP;AACH,GAJD;;AAKA,WAASI,KAAT,GAAiB;AACbnB,IAAAA,KAAK,CAACoB,IAAN,CAAW,gCAAX,EACIhB,IADJ,EACUM,MADV,EAEKW,IAFL,CAEU,UAAUC,QAAV,EAAoB;AACtBb,MAAAA,QAAQ,CAACa,QAAQ,CAAClB,IAAT,CAAcI,KAAf,CAAR;AACAP,MAAAA,aAAa,CAACsB,QAAd,CAAuBZ,OAAvB,CAA+Ba,MAA/B,CAAsC,eAAtC,IAA0D,UAASF,QAAQ,CAAClB,IAAT,CAAcI,KAAM,EAAvF;AACAL,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH,KANL,EAOKsB,KAPL,CAOW,UAAUC,KAAV,EAAiB;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KATL;AAWH;;AAED,sBACI,QAAC,KAAD;AAAO,IAAA,SAAS,EAAC,QAAjB;AAA0B,IAAA,KAAK,EAAC,KAAhC;AAAsC,IAAA,OAAO,EAAE,CAA/C;AAAkD,IAAA,KAAK,EAAC,SAAxD;AAAA,4BACI,QAAC,SAAD;AAAW,MAAA,KAAK,EAAC,UAAjB;AAA4B,MAAA,IAAI,EAAC,UAAjC;AAA4C,MAAA,KAAK,EAAEtB,IAAI,CAACE,QAAxD;AAAkE,MAAA,QAAQ,EAAEO;AAA5E;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,SAAD;AAAW,MAAA,IAAI,EAAC,UAAhB;AAA2B,MAAA,KAAK,EAAC,UAAjC;AAA4C,MAAA,IAAI,EAAC,UAAjD;AAA4D,MAAA,KAAK,EAAET,IAAI,CAACG,QAAxE;AAAkF,MAAA,QAAQ,EAAEM;AAA5F;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,IAAI,EAAC,QAAjC;AAA0C,MAAA,OAAO,EAAE,MAAIM,KAAK,EAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH;;GAjCuBjB,K;;KAAAA,K","sourcesContent":["import React, {useState} from \"react\";\nimport {Button, Stack, TextField} from \"@mui/material\";\nimport axios from \"axios\";\nimport {AxiosInstance} from \"./AxiosClient\";\n\ninterface UserLogin{\n    username:string;\n    password:string;\n}\n\ninterface Props {\n    setLoggedIn:(value:boolean)=>void;\n}\nexport default function Login({setLoggedIn}:Props){\n    const [data, setData] = useState<UserLogin>({username:\"\", password:\"\"});\n    const [token,setToken] =  useState();\n\n    const config = {\n        headers:{Authorization:~`Bearer ${token}`}\n    }\n    const handleChange  = (e:React.ChangeEvent<HTMLInputElement>) => {\n        const newData = {...data}\n        newData[e.currentTarget.name as keyof UserLogin] = e.currentTarget.value\n        setData(newData)\n    }\n    function login() {\n        axios.post('http://localhost:80/auth/login',\n            data, config)\n            .then(function (response) {\n                setToken(response.data.token);\n                AxiosInstance.defaults.headers.common['authorization'] = `Bearer ${response.data.token}`;\n                setLoggedIn(true);\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n\n    }\n\n    return(\n        <Stack direction=\"column\" width=\"50%\" spacing={2} color=\"primary\">\n            <TextField label=\"Username\" name=\"username\" value={data.username} onChange={handleChange} />\n            <TextField type=\"password\" label=\"Password\" name=\"password\" value={data.password} onChange={handleChange}/>\n            <Button variant=\"contained\" type=\"submit\" onClick={()=>login()}>Sign in</Button>\n        </Stack>\n    )\n}"]},"metadata":{},"sourceType":"module"}